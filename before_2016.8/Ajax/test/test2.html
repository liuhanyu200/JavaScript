<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax test2</title>
</head>
<body>
	<ul id="ul1"></ul>
	<a href="javascript:;">1</a>
	<a href="javascript:;">2</a>
	<a href="javascript:;">3</a>

	<script src="ajax.js"></script>
	<script>
	window.onload = function () {
		var oUl = document.getElementById('ul1');
		var aBtn = document.getElementsByTagName('a');
		var i = 0;

		for (i=0;i<aBtn.length;i++) {
			aBtn[i].index = i;
			aBtn[i].onclick = function () {
				ajax('./source/p'+(this.index+1)+'.txt'+'?t='+new Date().getTime(),function (str) {
					var aData = eval(str);
					// alert(aDate[0]); //object
					//console.log(aDate);
					oUl.innerHTML = '';

					// i<aData
					for (var i=0;i<aData.length;i++) {
						var oLi = document.createElement('li');
						oLi.innerHTML = aData[i].user+'...'+aData[i].pass;
						oUl.appendChild(oLi);
					}
				},function () {
					console.log('sorry,失败了！');
				});
			};
		}
	};
	</script>
</body>
</html>